Class {
	#name : #TestConnections,
	#superclass : #TestCase,
	#instVars : [
		'context'
	],
	#category : #CloudOps
}

{ #category : #tests }
TestConnections >> invalidToken [
	^ CoToken invalid
]

{ #category : #running }
TestConnections >> mockComputeDetailData [
	"secureJSONCallTo: https://gcr.io/v2/foobar-6e993/alpinetest/tags/list
a Dictionary('child'->#() 'manifest'->a Dictionary('sha256:108ed174fcf23d8b37051e10ec8fd351c71a112650543830eb816a515c8c8b61'->a Dictionary('imageSizeBytes'->'6268409' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595852095726' 'timeUploadedMs'->'1595852121377' ) 'sha256:4c4088b67efce58eff886fdea55a96aad89bcdd7815a21bd95dac77a2f87c36d'->a Dictionary('imageSizeBytes'->'6268410' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#('latest') 'timeCreatedMs'->'1595859110293' 'timeUploadedMs'->'1595859127109' ) 'sha256:57b9900cb7721156816d6b262b1c863e964719dd2e3887d81db1579bcb2db971'->a Dictionary('imageSizeBytes'->'6268409' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595849151066' 'timeUploadedMs'->'1595849155633' ) 'sha256:63cced7b1f942f005bb235036f6bf8aed58caab5fb9ce24b83baa495cf6aface'->a Dictionary('imageSizeBytes'->'6268411' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595849627317' 'timeUploadedMs'->'1595849645565' ) 'sha256:6fcf21afb4e28bbfeac665797a7e0727e310774b4ca548237dd972e1d328e8d3'->a Dictionary('imageSizeBytes'->'6268406' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595835866752' 'timeUploadedMs'->'1595835898197' ) 'sha256:7052fe3037e9f58714b9da1c726f3b14a1b3700e65825b67912f9b158a8613b1'->a Dictionary('imageSizeBytes'->'6268343' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595751750658' 'timeUploadedMs'->'1595751755007' ) 'sha256:88ebeff75007d28ee9f18f686b894c153538c88fd6587128d2a93f0082be0864'->a Dictionary('imageSizeBytes'->'6268344' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595751834730' 'timeUploadedMs'->'1595751849391' ) 'sha256:8c0454a2f46e37527c8434a8441ff037e5c08423da8457194dd74551c29e6f76'->a Dictionary('imageSizeBytes'->'6268406' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595854447602' 'timeUploadedMs'->'1595854471003' ) 'sha256:8f8066d118be98719426a2a9345cda0f1225b3a22531213f6eddc6d1598f57ab'->a Dictionary('imageSizeBytes'->'6268410' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595848964431' 'timeUploadedMs'->'1595848987165' ) 'sha256:939b56ba2c74f398ae63c67e71b710fcbcfe2ec5f6f1345021dd8e58e791569c'->a Dictionary('imageSizeBytes'->'6268340' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595689221120' 'timeUploadedMs'->'1595689245602' ) 'sha256:9b9faa3f3c097163e82bf9dae4ff7d9147afd55b5c2754a4e2acf7b90523d5f1'->a Dictionary('imageSizeBytes'->'6268408' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595851462789' 'timeUploadedMs'->'1595851485062' ) 'sha256:a8ee1df8bb011f498d632d9ddfda24279038d1c573d95921797ce5797a97a42c'->a Dictionary('imageSizeBytes'->'6268345' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595752816521' 'timeUploadedMs'->'1595752833804' ) 'sha256:aa88778231b2c08d783412e35bf777306d674a5907cf5242f8f5dfdbd65bc903'->a Dictionary('imageSizeBytes'->'6268408' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595852469236' 'timeUploadedMs'->'1595852485346' ) 'sha256:b81269a5deb0e3b8aca3c4944cc4a22afcfa8d4a96d3374d4e5696f02c6d6a43'->a Dictionary('imageSizeBytes'->'6268409' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595849811528' 'timeUploadedMs'->'1595849828585' ) 'sha256:bf8495941772434347b11daeef25717ecf32e9b5453410e0db735d5466e4b703'->a Dictionary('imageSizeBytes'->'6268410' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595851931213' 'timeUploadedMs'->'1595851947908' ) 'sha256:c1cc3353645740a4ce36bd5dfecdf39bd10ba2fb0f479916be90a77dcce6f65c'->a Dictionary('imageSizeBytes'->'6268409' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595849316426' 'timeUploadedMs'->'1595849335208' ) 'sha256:c7a8516ae110d8327650704ea57067ee378e30ebe42574cad6013a6cb172d807'->a Dictionary('imageSizeBytes'->'6268407' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595853681079' 'timeUploadedMs'->'1595853704163' ) 'sha256:d3138e6f82b6d8903fd020a0788da11f5cb1ef84d3d0eee135df78da8c0f9897'->a Dictionary('imageSizeBytes'->'6268412' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595850126371' 'timeUploadedMs'->'1595850130834' ) 'sha256:e3287ccc6ba102a8f40dd0fad38ee07b325a38c325ed564226e85efdd3e5f1a5'->a Dictionary('imageSizeBytes'->'6268408' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595753917900' 'timeUploadedMs'->'1595753935604' ) 'sha256:e46ea398263984d24d718b59b109e2c13074dbc5ca2478b9aa41116444ff19df'->a Dictionary('imageSizeBytes'->'6268407' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595851677039' 'timeUploadedMs'->'1595851681206' ) 'sha256:ed3266e9bdf556549558382126121bc4a937ef95420f6d1df17752d56147ac2d'->a Dictionary('imageSizeBytes'->'6268408' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595853284014' 'timeUploadedMs'->'1595853302144' ) ) 'name'->'foobar-6e993/alpinetest' 'tags'->#('latest') )
"
]

{ #category : #running }
TestConnections >> mockComputeInstancesData [
	"secureJSONCallTo: https://compute.googleapis.com/compute/v1/projects/foobar-6e993/zones/us-central1-a/instances
a Dictionary('id'->'projects/foobar-6e993/zones/us-central1-a/instances' 'kind'->'compute#instanceList' 'selfLink'->'https://www.googleapis.com/compute/v1/projects/foobar-6e993/zones/us-central1-a/instances' )
"
]

{ #category : #running }
TestConnections >> mockInstancesData [
	"secureJSONCallTo: https://compute.googleapis.com/compute/v1/projects/foobar-6e993/zones/us-central1-a/instances
a Dictionary('id'->'projects/foobar-6e993/zones/us-central1-a/instances' 'kind'->'compute#instanceList' 'selfLink'->'https://www.googleapis.com/compute/v1/projects/foobar-6e993/zones/us-central1-a/instances' )
"
]

{ #category : #running }
TestConnections >> mockKNativeDetailData [
	"secureJSONCallTo: https://gcr.io/v2/foobar-6e993/alpinetest/tags/list
a Dictionary('child'->#() 'manifest'->a Dictionary('sha256:108ed174fcf23d8b37051e10ec8fd351c71a112650543830eb816a515c8c8b61'->a Dictionary('imageSizeBytes'->'6268409' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595852095726' 'timeUploadedMs'->'1595852121377' ) 'sha256:4c4088b67efce58eff886fdea55a96aad89bcdd7815a21bd95dac77a2f87c36d'->a Dictionary('imageSizeBytes'->'6268410' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#('latest') 'timeCreatedMs'->'1595859110293' 'timeUploadedMs'->'1595859127109' ) 'sha256:57b9900cb7721156816d6b262b1c863e964719dd2e3887d81db1579bcb2db971'->a Dictionary('imageSizeBytes'->'6268409' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595849151066' 'timeUploadedMs'->'1595849155633' ) 'sha256:63cced7b1f942f005bb235036f6bf8aed58caab5fb9ce24b83baa495cf6aface'->a Dictionary('imageSizeBytes'->'6268411' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595849627317' 'timeUploadedMs'->'1595849645565' ) 'sha256:6fcf21afb4e28bbfeac665797a7e0727e310774b4ca548237dd972e1d328e8d3'->a Dictionary('imageSizeBytes'->'6268406' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595835866752' 'timeUploadedMs'->'1595835898197' ) 'sha256:7052fe3037e9f58714b9da1c726f3b14a1b3700e65825b67912f9b158a8613b1'->a Dictionary('imageSizeBytes'->'6268343' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595751750658' 'timeUploadedMs'->'1595751755007' ) 'sha256:88ebeff75007d28ee9f18f686b894c153538c88fd6587128d2a93f0082be0864'->a Dictionary('imageSizeBytes'->'6268344' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595751834730' 'timeUploadedMs'->'1595751849391' ) 'sha256:8c0454a2f46e37527c8434a8441ff037e5c08423da8457194dd74551c29e6f76'->a Dictionary('imageSizeBytes'->'6268406' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595854447602' 'timeUploadedMs'->'1595854471003' ) 'sha256:8f8066d118be98719426a2a9345cda0f1225b3a22531213f6eddc6d1598f57ab'->a Dictionary('imageSizeBytes'->'6268410' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595848964431' 'timeUploadedMs'->'1595848987165' ) 'sha256:939b56ba2c74f398ae63c67e71b710fcbcfe2ec5f6f1345021dd8e58e791569c'->a Dictionary('imageSizeBytes'->'6268340' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595689221120' 'timeUploadedMs'->'1595689245602' ) 'sha256:9b9faa3f3c097163e82bf9dae4ff7d9147afd55b5c2754a4e2acf7b90523d5f1'->a Dictionary('imageSizeBytes'->'6268408' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595851462789' 'timeUploadedMs'->'1595851485062' ) 'sha256:a8ee1df8bb011f498d632d9ddfda24279038d1c573d95921797ce5797a97a42c'->a Dictionary('imageSizeBytes'->'6268345' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595752816521' 'timeUploadedMs'->'1595752833804' ) 'sha256:aa88778231b2c08d783412e35bf777306d674a5907cf5242f8f5dfdbd65bc903'->a Dictionary('imageSizeBytes'->'6268408' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595852469236' 'timeUploadedMs'->'1595852485346' ) 'sha256:b81269a5deb0e3b8aca3c4944cc4a22afcfa8d4a96d3374d4e5696f02c6d6a43'->a Dictionary('imageSizeBytes'->'6268409' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595849811528' 'timeUploadedMs'->'1595849828585' ) 'sha256:bf8495941772434347b11daeef25717ecf32e9b5453410e0db735d5466e4b703'->a Dictionary('imageSizeBytes'->'6268410' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595851931213' 'timeUploadedMs'->'1595851947908' ) 'sha256:c1cc3353645740a4ce36bd5dfecdf39bd10ba2fb0f479916be90a77dcce6f65c'->a Dictionary('imageSizeBytes'->'6268409' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595849316426' 'timeUploadedMs'->'1595849335208' ) 'sha256:c7a8516ae110d8327650704ea57067ee378e30ebe42574cad6013a6cb172d807'->a Dictionary('imageSizeBytes'->'6268407' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595853681079' 'timeUploadedMs'->'1595853704163' ) 'sha256:d3138e6f82b6d8903fd020a0788da11f5cb1ef84d3d0eee135df78da8c0f9897'->a Dictionary('imageSizeBytes'->'6268412' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595850126371' 'timeUploadedMs'->'1595850130834' ) 'sha256:e3287ccc6ba102a8f40dd0fad38ee07b325a38c325ed564226e85efdd3e5f1a5'->a Dictionary('imageSizeBytes'->'6268408' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595753917900' 'timeUploadedMs'->'1595753935604' ) 'sha256:e46ea398263984d24d718b59b109e2c13074dbc5ca2478b9aa41116444ff19df'->a Dictionary('imageSizeBytes'->'6268407' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595851677039' 'timeUploadedMs'->'1595851681206' ) 'sha256:ed3266e9bdf556549558382126121bc4a937ef95420f6d1df17752d56147ac2d'->a Dictionary('imageSizeBytes'->'6268408' 'layerId'->'' 'mediaType'->'application/vnd.docker.distribution.manifest.v2+json' 'tag'->#() 'timeCreatedMs'->'1595853284014' 'timeUploadedMs'->'1595853302144' ) ) 'name'->'foobar-6e993/alpinetest' 'tags'->#('latest') )
"
]

{ #category : #running }
TestConnections >> mockKNativeServicesData [
	"secureJSONCallTo: https://us-central1-run.googleapis.com/apis/serving.knative.dev/v1/namespaces/foobar-6e993/services
a Dictionary('apiVersion'->'serving.knative.dev/v1' 'items'->an Array(a Dictionary('apiVersion'->'serving.knative.dev/v1' 'kind'->'Service' 'metadata'->a Dictionary('annotations'->a Dictionary('client.knative.dev/user-image'->'gcr.io/foobar-6e993/defaulttemplate' 'run.googleapis.com/client-name'->'gcloud' 'run.googleapis.com/client-version'->'301.0.0' 'serving.knative.dev/creator'->'973408038350@cloudbuild.gserviceaccount.com' 'serving.knative.dev/lastModifier'->'973408038350@cloudbuild.gserviceaccount.com' ) 'creationTimestamp'->'2020-08-01T10:52:54.737923Z' 'generation'->1 'labels'->a Dictionary('cloud.googleapis.com/location'->'us-central1' ) 'name'->'defaulttemplate' 'namespace'->'973408038350' 'resourceVersion'->'AAWrzrXWibA' 'selfLink'->'/apis/serving.knative.dev/v1/namespaces/973408038350/services/defaulttemplate' 'uid'->'474c911b-8bdc-4ab8-b6ba-47d4f28a74ad' ) 'spec'->a Dictionary('template'->a Dictionary('metadata'->a Dictionary('annotations'->a Dictionary('autoscaling.knative.dev/maxScale'->'1000' 'client.knative.dev/user-image'->'gcr.io/foobar-6e993/defaulttemplate' 'run.googleapis.com/client-name'->'gcloud' 'run.googleapis.com/client-version'->'301.0.0' ) 'name'->'defaulttemplate-00001-mum' ) 'spec'->a Dictionary('containerConcurrency'->80 'containers'->an Array(a Dictionary('image'->'gcr.io/foobar-6e993/defaulttemplate' 'ports'->an Array(a Dictionary('containerPort'->8080 )) 'resources'->a Dictionary('limits'->a Dictionary('cpu'->'1000m' 'memory'->'256Mi' ) ) )) 'timeoutSeconds'->300 ) ) 'traffic'->an Array(a Dictionary('latestRevision'->true 'percent'->100 )) ) 'status'->a Dictionary('address'->a Dictionary('url'->'https://defaulttemplate-eszmdol7vq-uc.a.run.app' ) 'conditions'->an Array(a Dictionary('lastTransitionTime'->'2020-08-01T10:53:05.902Z' 'status'->'True' 'type'->'Ready' ) a Dictionary('lastTransitionTime'->'2020-08-01T10:53:05.580Z' 'status'->'True' 'type'->'ConfigurationsReady' ) a Dictionary('lastTransitionTime'->'2020-08-01T10:53:05.902Z' 'status'->'True' 'type'->'RoutesReady' )) 'latestCreatedRevisionName'->'defaulttemplate-00001-mum' 'latestReadyRevisionName'->'defaulttemplate-00001-mum' 'observedGeneration'->1 'traffic'->an Array(a Dictionary('latestRevision'->true 'percent'->100 'revisionName'->'defaulttemplate-00001-mum' )) 'url'->'https://defaulttemplate-eszmdol7vq-uc.a.run.app' ) ) a Dictionary('apiVersion'->'serving.knative.dev/v1' 'kind'->'Service' 'metadata'->a Dictionary('annotations'->a Dictionary('client.knative.dev/user-image'->'gcr.io/foobar-6e993/foobar17' 'run.googleapis.com/client-name'->'gcloud' 'run.googleapis.com/client-version'->'301.0.0' 'serving.knative.dev/creator'->'973408038350@cloudbuild.gserviceaccount.com' 'serving.knative.dev/lastModifier'->'973408038350@cloudbuild.gserviceaccount.com' ) 'creationTimestamp'->'2020-07-29T18:29:35.982525Z' 'generation'->1 'labels'->a Dictionary('cloud.googleapis.com/location'->'us-central1' ) 'name'->'foobar17' 'namespace'->'973408038350' 'resourceVersion'->'AAWrmL2AkuA' 'selfLink'->'/apis/serving.knative.dev/v1/namespaces/973408038350/services/foobar17' 'uid'->'c49c9589-0bd6-48cd-a92b-96332d3e0c0b' ) 'spec'->a Dictionary('template'->a Dictionary('metadata'->a Dictionary('annotations'->a Dictionary('autoscaling.knative.dev/maxScale'->'1000' 'client.knative.dev/user-image'->'gcr.io/foobar-6e993/foobar17' 'run.googleapis.com/client-name'->'gcloud' 'run.googleapis.com/client-version'->'301.0.0' ) 'name'->'foobar17-00001-heb' ) 'spec'->a Dictionary('containerConcurrency'->80 'containers'->an Array(a Dictionary('image'->'gcr.io/foobar-6e993/foobar17' 'ports'->an Array(a Dictionary('containerPort'->8080 )) 'resources'->a Dictionary('limits'->a Dictionary('cpu'->'1000m' 'memory'->'256Mi' ) ) )) 'timeoutSeconds'->300 ) ) 'traffic'->an Array(a Dictionary('latestRevision'->true 'percent'->100 )) ) 'status'->a Dictionary('address'->a Dictionary('url'->'https://foobar17-eszmdol7vq-uc.a.run.app' ) 'conditions'->an Array(a Dictionary('lastTransitionTime'->'2020-07-29T18:29:46.252Z' 'status'->'True' 'type'->'Ready' ) a Dictionary('lastTransitionTime'->'2020-07-29T18:29:46.052Z' 'status'->'True' 'type'->'ConfigurationsReady' ) a Dictionary('lastTransitionTime'->'2020-07-29T18:29:46.252Z' 'status'->'True' 'type'->'RoutesReady' )) 'latestCreatedRevisionName'->'foobar17-00001-heb' 'latestReadyRevisionName'->'foobar17-00001-heb' 'observedGeneration'->1 'traffic'->an Array(a Dictionary('latestRevision'->true 'percent'->100 'revisionName'->'foobar17-00001-heb' )) 'url'->'https://foobar17-eszmdol7vq-uc.a.run.app' ) )) 'kind'->'ServiceList' 'metadata'->a Dictionary('resourceVersion'->'1596279185902000' 'selfLink'->'/apis/serving.knative.dev/v1/namespaces/973408038350/services' ) )
"
]

{ #category : #running }
TestConnections >> mockListTagsData [
	"secureJSONCallTo: https://gcr.io/v2/foobar-6e993/tags/list
a Dictionary('child'->#('alpinetest' 'anothertest' 'defaulttemplate' 'foo17' 'foo18' 'foobar' 'foobar17' 'helloworld' 'p8test' 'p8test2' 'p8test3' 'p8test4' 'p8test5' 'p8test6' 'p8test7' 'p8xx' 'p8yy' 'p8zz' 'pharotest' 'pharotest2' 'zzyyy') 'manifest'->a Dictionary() 'name'->'foobar-6e993' 'tags'->#() )

"
]

{ #category : #running }
TestConnections >> setUp [ 
	context := self
]

{ #category : #tests }
TestConnections >> testConnectionWithInvalidToken [
	self deny: (CoConnection new token: (context invalidToken)) isConnected. 

]

{ #category : #tests }
TestConnections >> testConnectionWithToken [
	self assert: (CoConnection new token: (context validToken)) isConnected. 

]

{ #category : #tests }
TestConnections >> testNotConnected [
	self deny: CoConnection new isConnected. 

]

{ #category : #tests }
TestConnections >> testProjectNeedsValidConnection [
	| project |
	project := CoProject new.
	self assert: project token isNil.
	project connection: CoConnection withValidToken.
	self assert: project token isValid.
	self assert: project canConnect
	
]

{ #category : #tests }
TestConnections >> validToken [
	^ CoToken valid
]
